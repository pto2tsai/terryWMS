# WMS 倉儲管理系統操作手冊 v20

> 版本：v20-with-import | 更新日期：2025-12-21

---

## 目錄

1. [系統架構概覽](#1-系統架構概覽)
2. [數位倉庫監控](#2-數位倉庫監控)
3. [暫存區監控](#3-暫存區監控)
4. [智能入庫系統](#4-智能入庫系統)
5. [出庫管理](#5-出庫管理)
6. [庫存調撥](#6-庫存調撥)
7. [報表與查詢](#7-報表與查詢)
8. [系統設定](#8-系統設定)
9. [資料匯入功能](#9-資料匯入功能)
10. [技術規格](#10-技術規格)

---

## 1. 系統架構概覽

### 1.1 倉庫配置

| 倉庫 | 區域 | 用途 | 巷道數 |
|------|------|------|--------|
| I 庫 | A、B 區 | 原料倉 | 各 22 巷 |
| J 庫 | C、D 區 | 成品倉 | 各 22 巷 |
| K 庫 | E、F、G、H 區 | 大型倉（挑高） | 各 22 巷 |

### 1.2 儲位編碼規則

**實體儲位格式：** `倉庫-區域-巷道-樓層`

```
範例：I-A-03-2F
      │ │  │  └─ 樓層（1F/2F/3F）
      │ │  └──── 巷道編號（01-22）
      │ └─────── 區域（A/B/C/D/E/F/G/H）
      └───────── 倉庫（I/J/K）
```

**各樓層容量：**
- 3F：8 板
- 2F：5 板
- 1F：16 板（挑高區）

### 1.3 虛擬儲位

| 編碼 | 名稱 | 用途 | 容量 |
|------|------|------|------|
| TEMP-IN | 進貨暫存區 | 進貨尚未上架 | 無限 |
| TEMP-OUT | 出貨暫存區 | 待出貨暫放 | 無限 |
| A00 | A區貨架前端 | 貨架前方暫放 | 無限 |
| A99 | A區貨架末端 | 貨架後方暫放 | 無限 |
| B00 | B區貨架前端 | 貨架前方暫放 | 無限 |
| B99 | B區貨架末端 | 貨架後方暫放 | 無限 |
| C00 | C區貨架前端 | 貨架前方暫放 | 無限 |
| C99 | C區貨架末端 | 貨架後方暫放 | 無限 |
| D00 | D區貨架前端 | 貨架前方暫放 | 無限 |
| D99 | D區貨架末端 | 貨架後方暫放 | 無限 |
| OTHER | 其他位置 | 特殊暫放區 | 無限 |

---

## 2. 數位倉庫監控

### 2.1 功能說明

即時顯示整個倉庫的庫存分佈狀況，以視覺化地圖呈現。

### 2.2 地圖顏色說明

| 顏色 | 狀態 | 說明 |
|------|------|------|
| 🟢 綠色 | 空位 | 該巷道有空位可用 |
| 🟡 黃色 | 半滿 | 使用率 50%-99% |
| 🔴 紅色 | 滿載 | 使用率 100% |
| ⚫ 灰色 | 無資料 | 尚未設定 |

### 2.3 Hover 庫存詳情

滑鼠移到任一巷道，會顯示浮動視窗，包含：

| 欄位 | 說明 |
|------|------|
| 儲位 | 完整儲位編號（如 I-A-03-2F） |
| 棧板編號 | 系統產生的唯一識別碼 |
| 公司 | 崇文 / 八方 |
| 品名 | 產品名稱 |
| 規格 | 產品規格 |
| 數量 | 庫存數量 |
| 效期 | 有效期限（過期顯示紅色，30天內顯示橘色） |
| 入庫日 | 入庫日期 |

### 2.4 操作方式

1. 進入「數位倉庫監控」頁面
2. 滑鼠移到地圖上的巷道格子
3. 自動顯示該巷道的庫存詳情
4. 滑鼠移開後自動隱藏

---

## 3. 暫存區監控

### 3.1 功能說明

位於數位地圖下方，即時監控所有虛擬儲位的庫存狀況。

### 3.2 顯示卡片

11 張卡片橫向排列，各顯示：
- 儲位編碼
- 當前棧板數量
- 位置名稱

### 3.3 顏色標示

| 儲位 | 底色 | 邊框色 |
|------|------|--------|
| TEMP-IN | 綠色 | 翠綠色 |
| TEMP-OUT | 橘色 | 橙色 |
| A00/A99 | 藍色 | 藍色 |
| B00/B99 | 靛青色 | 靛青色 |
| C00/C99 | 紫色 | 紫色 |
| D00/D99 | 粉紅色 | 粉紅色 |
| OTHER | 灰色 | 灰色 |

### 3.4 有庫存時的視覺提示

當虛擬儲位有庫存時，卡片會顯示光環效果：
- TEMP-IN：綠色光環
- TEMP-OUT：橘色光環
- 其他：白色光環

### 3.5 Hover 詳情

滑鼠移到卡片上，顯示與數位地圖相同格式的庫存表格。

---

## 4. 智能入庫系統

### 4.1 入庫流程

```
步驟 1：填寫產品資訊
    ↓
步驟 2：指定儲位
    ↓
步驟 3：預覽確認
    ↓
執行入庫 + 列印標籤
```

### 4.2 步驟 1：產品資訊

| 欄位 | 必填 | 說明 |
|------|------|------|
| 公司 | ✓ | 崇文 / 八方 |
| 品名 | ✓ | 產品名稱（支援自動完成） |
| 規格 | | 產品規格 |
| 數量 | ✓ | 入庫數量 |
| 批號 | | 生產批號 |
| 效期 | | 有效期限 |
| 廠商 | | 供應商名稱 |

### 4.3 步驟 2：指定儲位

**方式一：智能建議**
- 點擊「智能建議」按鈕
- 系統根據品名、規格自動推薦最佳儲位
- 優先推薦同品項、同規格的相鄰位置

**方式二：暫存區快選**
- 點擊暫存區按鈕快速選擇虛擬儲位
- 按鈕列：TEMP-IN、TEMP-OUT、A00、A99、B00、B99、C00、C99、D00、D99、OTHER

**方式三：地圖點選**
- 直接在倉庫地圖上點選儲位
- 綠色格子表示空位可選

**方式四：手動輸入**
- 在輸入框直接輸入儲位編號
- 支援實體儲位（如 I-A-03-2F）和虛擬儲位（如 A99）

### 4.4 步驟 3：預覽確認

顯示即將入庫的完整資訊：
- 棧板編號（自動產生）
- 產品資訊
- 儲位
- 入庫日期

### 4.5 入庫後動作

- ✅ 寫入 Firebase pallets 集合
- ✅ 記錄 inventoryLogs 異動紀錄
- ✅ 可選擇自動列印棧板標籤

---

## 5. 出庫管理

### 5.1 Wave 揀貨

**功能：** 批次處理多筆出貨訂單

**操作流程：**
1. 匯入出貨訂單（Excel）
2. 系統自動配對庫存
3. 產生揀貨清單
4. 掃描確認揀貨
5. 完成出庫

### 5.2 智能揀貨

**功能：** 單筆訂單的快速揀貨

**操作流程：**
1. 輸入品名和數量
2. 系統顯示符合條件的儲位
3. 選擇要出庫的棧板
4. 確認出庫

### 5.3 出庫狀態

| 狀態 | 說明 |
|------|------|
| Pending | 待處理 |
| Picking | 揀貨中 |
| Picked | 已揀貨 |
| Shipped | 已出貨 |

---

## 6. 庫存調撥

### 6.1 移動儲位

**功能：** 將棧板從 A 儲位移到 B 儲位

**操作流程：**
1. 掃描或輸入來源棧板
2. 輸入目標儲位
3. 確認移動

### 6.2 合併棧板

**功能：** 將多個棧板合併為一個

**條件：**
- 同品名
- 同規格
- 同批號

### 6.3 拆分棧板

**功能：** 將一個棧板拆分為多個

**操作：** 指定拆分數量，系統自動產生新棧板編號

---

## 7. 報表與查詢

### 7.1 庫存總覽

- 總棧板數
- 各倉庫分布
- 各公司庫存

### 7.2 效期管理

| 標籤 | 條件 |
|------|------|
| 🔴 已過期 | 效期 < 今天 |
| 🟠 即期品 | 效期 < 30 天 |
| 🟡 近效期 | 效期 < 90 天 |
| 🟢 正常 | 效期 > 90 天 |

### 7.3 庫存異動查詢

可查詢條件：
- 日期範圍
- 異動類型（入庫/出庫/移位/合併）
- 品名
- 儲位

### 7.4 報表匯出

支援匯出：
- 庫存總表（Excel）
- 效期報表（Excel）
- 異動紀錄（Excel）

---

## 8. 系統設定

### 8.1 使用者管理

| 角色 | 權限 |
|------|------|
| admin | 完整權限 |
| manager | 管理權限（不含系統設定） |
| operator | 操作權限（入庫/出庫） |
| viewer | 唯讀權限 |

### 8.2 品項主檔

管理產品基本資料：
- 品號
- 品名
- 規格
- 單位
- 分類

### 8.3 標籤列印

**儲位條碼列印：**

| 步驟 | 操作 |
|------|------|
| 1 | 選擇倉庫區域（I-A、I-B、J-C...） |
| 2 | 設定排號範圍（1-22） |
| 2 | 選擇樓層（1F/2F/3F） |
| 3 | 點擊「列印儲位條碼」 |

**棧板單重印：**

| 步驟 | 操作 |
|------|------|
| 1 | 輸入棧板編號 |
| 2 | 搜尋並確認資訊 |
| 3 | 點擊「重印棧板單」 |

---

## 9. 資料匯入功能

### 9.1 功能說明

從 Excel 批次匯入庫存資料到系統。

**位置：** 系統設定 → 資料匯入

### 9.2 操作流程

```
下載範本 → 填寫資料 → 上傳 Excel → 預覽驗證 → 執行匯入
```

### 9.3 Excel 欄位格式

| 欄位 | 必填 | 說明 | 範例 |
|------|------|------|------|
| 儲位 | ✓ | 實際或虛擬儲位 | I-A-03-2F、A99、TEMP-IN |
| 公司 | ✓ | 崇文 或 八方 | 崇文 |
| 品號 | ✓ | ERP 品號 | BC16118T |
| 品名 | ✓ | 產品名稱 | 熟白蝦 |
| 規格 | | 產品規格 | 16/20*1.1KG*8盒 |
| 數量 | ✓ | 庫存數量 | 30 |
| 單位 | | 計量單位 | 箱 |
| 批號 | | 生產批號 | 20241201 |
| 效期 | | 有效期限 | 2025/06/30 |

### 9.4 匯入選項

| 選項 | 預設 | 說明 |
|------|------|------|
| 自動建立新儲位 | ✓ | 儲位不存在時自動建立 |
| 自動建立新品項 | ✓ | 品項不存在時自動建立 |
| 跳過重複資料 | ✓ | 相同儲位+品名+規格+數量 視為重複 |

### 9.5 驗證狀態

| 符號 | 狀態 | 說明 |
|------|------|------|
| ✓ | 有效 | 可以匯入 |
| ✗ | 錯誤 | 必填欄位缺失或格式錯誤 |
| ⚠ | 重複 | 資料已存在（可選擇跳過） |

### 9.6 匯入結果

成功匯入後：
- 新增 pallets 集合記錄
- 新增 inventoryLogs 異動記錄
- 自動更新數位地圖
- 自動更新暫存區監控

---

## 10. 技術規格

### 10.1 系統架構

| 項目 | 技術 |
|------|------|
| 前端 | HTML5 + Tailwind CSS + Vanilla JS |
| 後端 | Firebase Firestore |
| 認證 | Firebase Authentication |
| 部署 | 靜態 HTML（可本地或雲端） |

### 10.2 Firebase 集合

| 集合名稱 | 用途 |
|------|------|
| pallets | 棧板資料 |
| locations | 儲位資料 |
| products | 品項主檔 |
| inventoryLogs | 異動紀錄 |
| shippingOrders | 出貨訂單 |
| users | 使用者資料 |
| warehouses | 倉庫設定 |

### 10.3 棧板資料結構

```javascript
{
  palletId: "P2024122100001",      // 棧板編號
  company: "崇文",                  // 公司
  productId: "BC16118T",           // 品號
  productName: "熟白蝦",           // 品名
  spec: "16/20*1.1KG*8盒",        // 規格
  quantity: 30,                    // 數量
  unit: "箱",                      // 單位
  locationId: "I-A-03-2F",         // 儲位
  batchNo: "20241201",             // 批號
  expiryDate: Timestamp,           // 效期
  status: "Available",             // 狀態
  createdAt: Timestamp,            // 建立時間
  source: "Inbound"                // 來源
}
```

### 10.4 狀態值說明

| 狀態 | 說明 | 是否計入庫存 |
|------|------|------------|
| Available | 可用 | ✓ |
| stored | 已儲存 | ✓ |
| undefined | 未設定 | ✓ |
| Picking | 揀貨中 | ✓ |
| shipped | 已出貨 | ✗ |
| outbound | 已出庫 | ✗ |
| deleted | 已刪除 | ✗ |
| cancelled | 已取消 | ✗ |

### 10.5 瀏覽器支援

| 瀏覽器 | 最低版本 |
|--------|---------|
| Chrome | 80+ |
| Edge | 80+ |
| Firefox | 75+ |
| Safari | 13+ |

---

## 附錄

### A. 快捷鍵

| 按鍵 | 功能 |
|------|------|
| Enter | 確認輸入/搜尋 |
| Esc | 關閉彈窗 |
| F5 | 重新整理頁面 |

### B. 常見問題

**Q: 暫存區監控數量為 0？**
A: 確認棧板的 locationId 是否為正確的虛擬儲位編碼（如 A99，非 I-A-99）

**Q: 入庫後地圖沒更新？**
A: 點擊「重新整理」按鈕或按 F5 重新載入頁面

**Q: 匯入失敗？**
A: 檢查 Excel 欄位名稱是否正確，必填欄位是否完整

### C. 聯絡支援

如遇系統問題，請聯絡系統管理員。

---

*本手冊適用於 WMS 系統 v20 版本*
